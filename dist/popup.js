document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("myButton"),t=document.getElementById("savedLinks"),n=document.getElementById("groupList"),o=JSON.parse(localStorage.getItem("groups"))||[];let a=JSON.parse(localStorage.getItem("openGroups"))||[];function l(){t.innerHTML="",(JSON.parse(localStorage.getItem("savedLinks"))||[]).forEach(((e,n)=>{if(!a.includes(e.group))return;const s=document.createElement("li"),i=document.createElement("button"),d=document.createElement("button"),r=document.createElement("button");r.classList.add("go-link-button"),r.textContent="Go",r.addEventListener("click",(()=>{return t=e.url,void window.open(t,"_blank");var t})),d.classList.add("copy-link-button"),d.textContent="Copy",d.addEventListener("click",(()=>function(e){const t=document.createElement("div"),n=document.createElement("p");n.classList.add("alert__text"),t.classList.add("alert_hide"),navigator.clipboard.writeText(e).then((()=>{n.textContent="Успешно скопировано",t.classList.replace("alert_hide","alert_show"),t.appendChild(n),document.body.appendChild(t)})).catch((e=>{n.textContent="Ошибка",t.classList.replace("alert_hide","alert_show"),t.appendChild(n),document.body.appendChild(t)})).finally((()=>{setTimeout((()=>{t.classList.replace("alert_show","alert_hide")}),1e3)}))}(e.url))),i.classList.add("delete-button"),i.textContent="Delete",i.addEventListener("click",(()=>function(e){const t=JSON.parse(localStorage.getItem("savedLinks"))||[],n=t.splice(e,1)[0];localStorage.setItem("savedLinks",JSON.stringify(t)),n.group&&t.every((e=>e.group!==n.group))&&(o.splice(o.indexOf(n.group),1),localStorage.setItem("groups",JSON.stringify(o)),localStorage.setItem("openGroups",n.group)),l()}(n))),s.textContent=`${e.title}: `,s.appendChild(r),s.appendChild(d),s.appendChild(i),t.appendChild(s)})),n.innerHTML="",o.forEach((e=>{const t=document.createElement("div");t.classList.add("group-item"),a.includes(e)&&t.classList.add("active"),t.textContent=e,t.addEventListener("click",(()=>function(e){a.includes(e)?a=a.filter((t=>t!==e)):a.push(e),localStorage.setItem("openGroups",JSON.stringify(a)),l()}(e))),n.appendChild(t)}))}e.addEventListener("click",(function(){const e=prompt("Enter the title:"),t=prompt("Enter the URL:"),n=prompt("Enter the group (optional):");e&&t&&(function(e,t,n){const a=JSON.parse(localStorage.getItem("savedLinks"))||[];a.push({title:e,url:t,group:n}),localStorage.setItem("savedLinks",JSON.stringify(a)),n&&!o.includes(n)&&(o.push(n),localStorage.setItem("groups",JSON.stringify(o)))}(e,t,n),l())})),l()}));